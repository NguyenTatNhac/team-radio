<!DOCTYPE html>
<html>
   <head>
      <title>Hello world</title>
   </head>
   <script src = "/socket.io/socket.io.js"></script>
   
   <script>
     var beginUrl = 'teststations/';
     var stationUrl = window.location.href.substr(window.location.href.search(beginUrl) + beginUrl.length);
      var socket = io('/station');
      var stationName = stationUrl; // In the moment, get station name in url
      socket.emit('join-station', stationName);
      socket.on('message', function(stationName){
        document.getElementById('event').innerHTML = 'message';
        document.getElementById('data').innerHTML = stationName;
        console.log(stationName);
      });

      socket.on('join-station-failure', function(stationName){
        document.getElementById('event').innerHTML = 'join-station-failure';
        document.getElementById('data').innerHTML = stationName;
      });

      // Received play list from server
      socket.on('play-list', function(playList){
        document.getElementById('event').innerHTML = 'play-list';
        document.getElementById('data').innerHTML = playList;
        console.log(playList);
      });

      // Received now playing song from server
      socket.on('now-playing', function(nowPlaying){
        document.getElementById('event').innerHTML = 'now-playing';
        document.getElementById('data').innerHTML = nowPlaying;
      })

      // Received new song from server
      socket.on('add-new-song', function(newSong){
        document.getElementById('event').innerHTML = 'add-new-song';
        document.getElementById('data').innerHTML = newSong;
      })

      // Add new song to the station
      function addNewSong(songUrl){
        socket.emit('add-new-song', songUrl);
      }

      // testing function
      function sendToServer(){
        var input = document.getElementById('input').value;
        addNewSong(input);
      }
   </script>
   <body>
     Input: <input type="text" id="input">
     <input onclick="sendToServer()" type="button" value="send"><br>
    <p id='event' style="background-color: yellow;"></p><br>
    <p id='data' style="background-color: green;"></p>

   </body>
</html>
